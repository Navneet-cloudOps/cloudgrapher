!function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[i]={exports:{}};t[i][0].call(f.exports,function(e){var n=t[i][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){var r=e("./findedges").findEdges;n.graphOptions={nodes:{brokenImage:"images/unknown.png"},edges:{style:"arrow","color.highlight":"red"},stabilize:!0,zoomExtentOnStabilize:!0},n.collectData=function(e){"use strict";var t={nodes:[],edges:[]},n=[],o=[],a=function(e,t){o.push({from:i,to:e,title:t})};for(var i in e.Resources){var s=e.Resources[i],c=s.Properties,u=s.Type.toLowerCase().replace(/::/g,"-");n.push(i),t.nodes.push({id:i,label:i,group:u,shape:"image",image:"images/"+u+".png"}),r(c,a)}return t.edges=o.filter(function(e){return e&&n.indexOf(e.to)>=0}),t}},{"./findedges":3}],2:[function(e,t,n){!function(){"use strict";var t,n,r,o=e("./collectdata");t=ace.edit("jsoneditor"),t.setTheme("ace/theme/tomorrow_night_eighties"),t.getSession().setMode("ace/mode/json"),t.setOption("maxLines",60),t.setOption("minLines",40),t.getSession().on("changeAnnotation",function(){var e=t.getSession().getAnnotations();if($("#statusbar").toggleClass("failure",0!==e.length),0===e.length){var n=t.getSession().getLength()<2&&0===t.getSession().getLine(0).length?"No content":"Valid";$("div.status-message").text(n)}else{var r=e[0];$("div.status-message").text(r.text+" at "+r.row+":"+r.column)}});var a=ace.require("ace/ext/statusbar").StatusBar;new a(t,document.getElementById("statusbar")),t.commands.addCommand({name:"showKeyboardShortcuts",bindKey:{win:"Ctrl-Alt-h",mac:"Command-Alt-h"},exec:function(e){ace.config.loadModule("ace/ext/keybinding_menu",function(t){t.init(e),e.showKeyboardShortcuts()})}});var i=function(e){var n=new FileReader;n.onload=function(){var e=n.result;e&&(t.setValue(e),t.navigateTo(0,0)),t.resize()},n.readAsText(e)},s=function(){var e;try{e=o.collectData(JSON.parse(t.getValue()))}catch(a){e={}}r?n.setData(e):(r=$("div.graph_overlay"),n=new vis.Network($("#graph_area").get(0),e,o.graphOptions),r.resize(function(){n.redraw(),n.zoomExtent()})),r.fadeIn(300,function(){n.redraw(),n.zoomExtent({easingFunction:"linear"})})},c=function(){var e="template";try{e=JSON.parse(t.getValue(t.getValue())).Description}catch(n){}return e},u=function(){var e=r.find("canvas");e&&1===e.length?e[0].toBlob(function(e){saveAs(e,c()+".png")}):console.error("Expected to find one canvas but got "+e)},f=function(){var e=JSON.stringify(JSON.parse(t.getValue()),null,2),n=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(n,c()+".json")},l=document.getElementById("cfeditor");l.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},!1),l.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i(e.dataTransfer.files[0])},!1),$("#open_template").change(function(e){i(e.target.files[0])}),$("#save_template").click(function(e){return e.preventDefault(),f(),!1}),$("#save_graph").click(function(e){return e.preventDefault(),u(),!1}),$("#show_graph").click(function(e){return e.preventDefault(),s(),!1}),$("#close_graph").click(function(e){return e.preventDefault(),r.fadeOut(500),!1})}()},{"./collectdata":1}],3:[function(e,t,n){n.findEdges=function r(e,t,n){"use strict";if(e instanceof Array)e.forEach(function(e){r(e,t,n||"")});else if("object"==typeof e)if(1===Object.keys(e).length){var o=Object.keys(e)[0];if("Ref"===o&&"string"==typeof e[o])t(e[o],n||"");else if("Fn::Join"===o&&e[o]instanceof Array)e[o][1].forEach(function(n){r(n,t,e[o][1].join(e[o][0]))});else if("Fn::GetAtt"===o&&e[o]instanceof Array)t(e[o][0],e[o][1]);else for(var a in e)r(e[a],t,a)}else for(var i in e)r(e[i],t,i)}},{}]},{},[2]);
//# sourceMappingURL=js/edit.bundle.js.map